function setRootData(t){var e=nodes[0];e.url=t.url,e.root=t.root,e.children=t.children,e.status=t.status,e.title=t.title,e.id=0}function update(t){t.id=nodes.length;var e=t,o=nodes[0];if(o.hasOwnProperty("url"))for(var r=0;r<nodes.length;r++)if(nodes[r].url===t.root){o=nodes[r];break}o.children?o.children.push(e):o.children=[e],nodes.push(e),node=node.data(tree.nodes(root),function(t){return t.id}),link=link.data(tree.links(nodes),function(t){return t.source.id+"-"+t.target.id}),node.enter().append("circle").attr("class",function(t){return console.log(t.status),"Keyword Found"===t.status?"keywordNode":"Error"===t.status?"errorNode":"node"}).attr("r",4).attr("cx",function(t){return t.parent.px}).attr("cy",function(t){return t.parent.py}).on("mouseover",function(t){div.transition().duration(200).style("opacity",.9),div.html("<b>Title:</b> "+t.title+"<br><b>URL:</b> "+t.url).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){div.transition().duration(500).style("opacity",0)}).on("click",function(t){window.open(t.url,"_blank")}),link.enter().insert("path",".node").attr("class","link").attr("d",function(t){var e={x:t.source.px,y:t.source.py};return diagonal({source:e,target:e})});var a=svg.transition().duration(duration);a.selectAll(".link").attr("d",diagonal),a.selectAll("circle").attr("cx",function(t){return t.px=t.x}).attr("cy",function(t){return t.py=t.y})}function showChartArea(){$("#chart-area").show(),$("#log-tab").removeClass("inactive-tab"),$("#log-tab").addClass("active-tab"),$("#node-tab").addClass("inactive-tab"),$("#node-tab").removeClass("active-tab")}function hideChartArea(){$("#chart-area").hide(),$("#log-tab").removeClass("inactive-tab"),$("#log-tab").addClass("active-tab"),$("#node-tab").addClass("inactive-tab"),$("#node-tab").removeClass("active-tab")}function clearChart(){d3.selectAll("svg").remove(),nodes=tree(root={}),root.parent=root,root.px=root.x,root.py=root.y,diagonal=d3.svg.diagonal(),svg=d3.select("#chart").append("svg").attr("width",width).attr("height",height).style("background-color","#f7f7f9").append("g").attr("transform","translate(10,10)"),node=svg.selectAll(".node"),link=svg.selectAll(".link"),duration=750}var div=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),margin={top:40,right:100,bottom:20,left:80},height=600+margin.top+margin.bottom,width=960+margin.left+margin.right,duration=750,tree=d3.layout.tree().size([width-20,height-40]),root={},nodes=tree(root);root.parent=root,root.px=root.x,root.py=root.y;var diagonal=d3.svg.diagonal(),svg=d3.select("#chart").append("svg").attr("width",width).attr("height",height).style("background-color","#f7f7f9").append("g").attr("transform","translate(10,10)"),node=svg.selectAll(".node"),link=svg.selectAll(".link");$(document).ready(function(){$("#node-tab").on("click",function(){showChartArea(),hideTextArea()})});